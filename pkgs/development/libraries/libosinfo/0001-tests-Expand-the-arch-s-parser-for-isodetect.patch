From b9cb227842948b1b2289cdd3e9b8d925664c2ee7 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Fabiano=20Fid=C3=AAncio?= <fidencio@redhat.com>
Date: Fri, 7 Sep 2018 15:04:20 +0200
Subject: [PATCH 1/2] tests: Expand the arch's parser for isodetect
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Some Windows ISOs isodata, as the ones added as part of commit 857f503,
uses X64 and X86 and load_iso() didn't take those into consideration.

Signed-off-by: Fabiano FidÃªncio <fidencio@redhat.com>
Reviewed-by: Cole Robinson <crobinso@redhat.com>
---
 tests/test-isodetect.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/tests/test-isodetect.c b/tests/test-isodetect.c
index 415770b..76f0c5a 100644
--- a/tests/test-isodetect.c
+++ b/tests/test-isodetect.c
@@ -106,6 +106,7 @@ static struct ISOInfo *load_iso(GFile *file, const gchar *shortid, const gchar *
     info->langs = g_hash_table_new_full(g_str_hash, g_str_equal, g_free, NULL);
     if (strstr(name, "amd64") ||
              strstr(name, "x64") ||
+             strstr(name, "X64") ||
              strstr(name, "x86_64") ||
              strstr(name, "64bit") ||
              strstr(name, "64-bit"))
@@ -114,6 +115,7 @@ static struct ISOInfo *load_iso(GFile *file, const gchar *shortid, const gchar *
              strstr(name, "i586") ||
              strstr(name, "i686") ||
              strstr(name, "x86") ||
+             strstr(name, "X86") ||
              strstr(name, "32bit") ||
              strstr(name, "32-bit"))
         arch = "i386";
-- 
2.19.0

